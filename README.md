# stepic_web_tehnology

git clone https://github.com/takinado/stepic_web_tehnology.git /home/box/web

bash /home/box/web/init.sh

1.8.12

Отдача статических файлов

1) Установите Web-сервер nginx

2) В директории /home/box (домашняя директория) создайте следующую структуру директорий

/home/box/web
          |---public
          |   |---img
          |   |---css
          |   |---js
          |---uploads
          |---etc

3) Настройте nginx так что бы:

    Все URL, начинающиеся с /uploads/  (например /uploads/1.jpeg) отдавались из директории /home/box/web/uploads
    Все URL с расширением (например /img/1.jpeg) отдавались из директории /home/box/web/public
    Все URL без расширения (например /question/123)  возвращали HTTP 404

4) Фрагмент конфига nginx который обслуживает ваш проект должен находиться в файле /home/box/web/etc/nginx.conf и должен быть включен в основной конфиг с помощью символической ссылки.

5) Запустите nginx, так что бы он принимал запросы на порту 80 и обслуживал бы любые домены.

6) Не забудьте закомитить и сохранить на github полученную структуру директорий и конфиги.


1.9.11

Запуск WSGI приложений

1) Разверните репозиторий со своим проектом в директориию /home/box/web

2) Создайте WSGI приложение в файле /home/box/web/hello.py

WSGI приложение должно возвращать документ с MIME-типом text/plain, содержащий все GET параметры, по одному на каждую строку.

Например при запросе  /?a=1&a=2&b=3 приложение должно вернуть такой текст

a=1
a=2
b=3

3) Настройте Gunicorn таким образом, что бы он запускал приложение  /home/box/web/hello.py , и принимал соединения на IP адресе 0.0.0.0 на порту 8080 .  (Использования IP = 0.0.0.0 необходимо для тестирования). Конфиг разместить в файле /home/box/etc/hello.py и подключите его с помощью символической ссылки /etc/gunicorn.d/hello.py

4) Настройте nginx так что бы location /hello/ проксировался на cервер Guincorn

Таким образом, WSGI приложение должно быть доступно по URL

    http://127.0.0.1/hello/
    http://127.0.0.1:8080/

5) Не забудьте закомитить и сохранить на github полученную структуру директорий и конфиги.


2.1.11

Создание Django приложения

1) Разверните репозиторий со своим проектом в директориию /home/box/web

2) В директории /home/box/web  с помощью утилиты django-admin.py создайте новый Django-проект с названием ask

3) Внутри директории проекта создайте приложени с название qa  (questions and answers)

C учетом директорий созданных на предыдущих задания, должна получится следующая структура директорий.

.
├── ask
│   ├── ask
│   ├── manage.py
│   └── qa
├── etc
├── public
└── uploads

4) В файле ask/qa/views.py создайте тестовый контроллер со следующим содержимым:

from django.http import HttpResponse 
def test(request, *args, **kwargs):
    return HttpResponse('OK')

5) Добавьте в urls.py  маршрут для следующих URL

/
/login/
/signup/
/question/<123>/    # вместо <123> - произвольный ID
/ask/
/popular/
/new/

6) Настройте Gunicorn таким образом, что бы он запускал ваше Django-приложение по адресу 0.0.0.0:8000 . (старый hello-world скрипт останется работать на порту 8080).  Nginx должен проксировать запросы как в предыдущем задании.

В результате ваше Django приложение должно отдавать по URL вида http://127.0.0.1/question/<123>/  страницы с кодом 200.  Содержимое страницы не имеет значение - главное, что был хотя бы 1 символ. По URL, не указанным в urls.py, ваше приложение должно возвращать код HTTP 404.

7) Не забудьте закомитить и сохранить на github полученную структуру директорий и конфиги.
